<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Registro de usuario</title>
	<link rel="stylesheet" href="estilocalculadora.css">
</head>
<body>
	<div class="container">
		<h1>Formulario de registro</h1>
		<form id="formRegistro" novalidate>
			<div class="row">
				<div class="col">
					<label for="nombre">Nombre completo</label>
					<input id="nombre" name="nombre" type="text" required>
					<div id="err-nombre" class="error" aria-live="polite"></div>

					<label for="email">Correo electrónico</label>
					<input id="email" name="email" type="email" required>
					<div id="err-email" class="error" aria-live="polite"></div>

					<label for="telefono">Teléfono</label>
					<input id="telefono" name="telefono" type="tel" placeholder="3001234567">
					<div id="err-telefono" class="error" aria-live="polite"></div>
				</div>

				<div class="col col-avatar">
					<label for="avatar">Imagen de perfil</label>
					<input id="avatar" name="avatar" type="file" accept="image/*">
					<img id="preview" class="avatar-preview" src="" alt="Vista previa" hidden>
					<div id="err-avatar" class="error" aria-live="polite"></div>
				</div>
			</div>

			<label for="password">Contraseña</label>
			<input id="password" name="password" type="password" required minlength="6">
			<div id="err-password" class="error" aria-live="polite"></div>

			<label for="confirm">Confirmar contraseña</label>
			<input id="confirm" name="confirm" type="password" required>
			<div id="err-confirm" class="error" aria-live="polite"></div>

			<div class="actions">
				<button type="submit" id="btnEnviar">Registrarme</button>
			</div>
		</form>

	<div id="resultado"></div>
	</div>

	<script>
		const form = document.getElementById('formRegistro');
		const preview = document.getElementById('preview');
		const avatar = document.getElementById('avatar');

		// Validaciones simples
		function mostrarError(id, msg) { document.getElementById(id).textContent = msg || ''; }

		avatar.addEventListener('change', function () {
			const file = avatar.files[0];
			if (!file) { preview.style.display = 'none'; mostrarError('err-avatar', ''); return; }
			if (!file.type.startsWith('image/')) { mostrarError('err-avatar', 'El archivo debe ser una imagen.'); preview.style.display='none'; return; }
			if (file.size > 2 * 1024 * 1024) { mostrarError('err-avatar', 'La imagen debe pesar menos de 2MB.'); preview.style.display='none'; return; }
			mostrarError('err-avatar', '');
			const url = URL.createObjectURL(file);
			preview.src = url; preview.style.display = 'block';
		});

		form.addEventListener('submit', function (e) {
			e.preventDefault();
			// limpiar errores
			['err-nombre','err-email','err-telefono','err-password','err-confirm'].forEach(id => mostrarError(id, ''));

			const nombre = document.getElementById('nombre').value.trim();
			const email = document.getElementById('email').value.trim();
			const telefono = document.getElementById('telefono').value.trim();
			const password = document.getElementById('password').value;
			const confirm = document.getElementById('confirm').value;

			let valido = true;

			if (nombre.length < 3) { mostrarError('err-nombre', 'El nombre debe tener al menos 3 caracteres.'); valido = false; }
			if (!/^\S+@\S+\.\S+$/.test(email)) { mostrarError('err-email', 'Correo no válido.'); valido = false; }
			if (telefono && !/^\d{7,15}$/.test(telefono)) { mostrarError('err-telefono', 'Teléfono no válido (solo dígitos, 7-15 caracteres).'); valido = false; }
			if (password.length < 6) { mostrarError('err-password', 'La contraseña debe tener al menos 6 caracteres.'); valido = false; }
			if (password !== confirm) { mostrarError('err-confirm', 'Las contraseñas no coinciden.'); valido = false; }

			if (!valido) return;

			// Simular envío: mostrar resumen en la página (no enviar a servidor)
			const file = avatar.files[0];
			const nombreArchivo = file ? file.name : 'Sin imagen';
			document.getElementById('resultado').textContent = `Registro completado: ${nombre} - ${email} - ${telefono} - ${nombreArchivo}`;

			// Opcional: limpiar el formulario
			// form.reset(); preview.style.display='none';
		});
	</script>
</body>
</html>

